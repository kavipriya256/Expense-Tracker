{% extends 'base.html' %}
{% block content %}
<h2>Dashboard</h2>
<p><strong>Total Spent:</strong> â‚¹{{ total }}</p>

<div class="mx-auto" style="width: 70%; max-width: 400px;">
    <canvas id="expenseChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
fetch("/chart-data/")
.then(response => response.json())
.then(data => {
    const labels = data.map(item => item.category__name);
    const values = data.map(item => item.total);
    const ctx = document.getElementById('expenseChart').getContext('2d');
    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: labels,
            datasets: [{
                data: values,
                backgroundColor: ['#FF6384','#36A2EB','#FFCE56','#4BC0C0','#9966FF']
            }]
        }
    });
});
</script>
{% endblock %}
